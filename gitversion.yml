# GitVersion v6
workflow: GitHubFlow/v1
mode: ContinuousDelivery

strategies:
  - Fallback
  - ConfiguredNextVersion
  - MergeMessage
  - TaggedCommit
  - TrackReleaseBranches
  - VersionInBranchName
  - Mainline

# Let regular commit messages drive bumps (works with squash merges)
commit-message-incrementing: Enabled
tag-prefix: 'v'

# Map both +semver tokens and Conventional Commit headers
major-version-bump-message: "(\\+semver:\\s?(breaking|major))|(^.*!:)|(\\bBREAKING[ -]CHANGE\\b)"
minor-version-bump-message: "(\\+semver:\\s?(feature|minor))|(^feat(\\(.+\\))?:)"
patch-version-bump-message: "(\\+semver:\\s?(fix|patch))|(^fix(\\(.+\\))?:)|(^perf(\\(.+\\))?:)|(^refactor(\\(.+\\))?:)|(^chore(\\(.+\\))?:)|(^docs(\\(.+\\))?:)|(^style(\\(.+\\))?:)|(^build(\\(.+\\))?:)|(^ci(\\(.+\\))?:)|(^test(\\(.+\\))?:)|(^revert: )"

# Optional: skip increment on commits explicitly marked as none/skip
no-bump-message: '\+semver:\s?(none|skip)'

branches:
  main:
    regex: ^main$
    is-main-branch: true
    label: ""
  feature:
    regex: ^feature[/-]
    label: useBranchName
